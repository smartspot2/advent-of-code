(lambda y,z:[(m:=l.split()[-1])if'k'in l else(lambda d,v:y.update({d:int(''.join(t['X'in t]for t in zip(m,f"{int(v):036b}")),2)})or(lambda r,c:z.update({r.format(*f'{b:0{c}b}'):int(v)for b in range(2**c)}))(''.join([a,'{}',w]['1X'.find(a)]for a,w in zip(m,f"{int(d):036b}")),m.count('X')))(*l[4:].split('] ='))for l in open('day14.in')]and print(sum(y.values()),sum(z.values())))({},{})
